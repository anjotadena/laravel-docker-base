import { useState } from 'react';
import { Input, InputProps } from '@/components/ui/Input';
import { HiOutlineEyeOff, HiOutlineEye } from 'react-icons/hi';
import type { MouseEvent } from 'react';

interface PasswordInputProps extends InputProps {
  onVisibleChange?: (visible: boolean) => void;
}

const PasswordInput = (props: PasswordInputProps) => {
  const { onVisibleChange, ...rest } = props;

  const [pwInputType, setPwInputType] = useState('password');

  const onPasswordVisibleClick = (e: MouseEvent<HTMLSpanElement>) => {
    e.preventDefault();
    const nextValue = pwInputType === 'password' ? 'text' : 'password';
    setPwInputType(nextValue);
    onVisibleChange?.(nextValue === 'text');
  };

  return (
    <Input
      {...rest}
      type={pwInputType}
      suffix={
        <span
          className="cursor-pointer text-xl"
          onClick={onPasswordVisibleClick}
        >
          {pwInputType === 'password' ? <HiOutlineEyeOff /> : <HiOutlineEye />}
        </span>
      }
    />
  );
};

export default PasswordInput;
